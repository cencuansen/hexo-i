---
title: CLR 反射
tags:
  - CLR
  - CSharp
  - Reflection
categories:
  - CLR
date: 2023-02-18 11:27:59
---

# 概念

在运行时获取程序集元数据的能力。它使得程序能够在运行时读取自身的类型信息并执行与该类型相关的操作，例如动态创建类型、调用对象上的方法、读写对象的属性或字段，以及访问程序集中的元数据等。

# 实际应用

- 对象关系映射(ORM)
- 面向切面编程(AOP)
- 代码生成
- 动态代理
- 插件系统：编辑器插件、浏览器插件

# 缺点

## 性能较差

使用反射进行对象创建、属性赋值、方法调用等操作需要更多的时间和资源，因为这些操作需要在运行时动态计算和解析。相比于直接编写代码实现这些操作，使用反射会增加很多开销。

## 安全性问题

反射可以绕过编译时的类型检查和访问权限检查，因此可能会带来安全性问题。如果恶意用户使用反射来访问不应该被访问的代码或数据，就可能会导致严重的安全漏洞。

## 可读性较差

反射的代码通常比较难读懂，因为它涉及到很多动态计算和解析，可能会包含大量的复杂逻辑。相比于直接编写代码实现相同的功能，使用反射会增加代码的复杂度，降低代码的可读性。

## 维护成本较高

由于反射的代码比较难读懂和理解，因此维护成本也相对较高。如果使用反射编写的代码出现了问题，需要花费更多的时间和精力进行调试和修复。

# 实例化

Activator.CreateInstance();
Activator.CreateInstanceFrom();
AppDomain.CreateDomain().CreateInstance();
